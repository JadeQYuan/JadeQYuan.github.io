title: C 语法
description: C 语法
categories:
  - 计算机基础
author: Jade
date: 2021-11-24 13:00:00
---
## 数据类型、运算符、表达式
### 变量名
- 数字及字母组成，以字母开头。
- “_”被看作是字母，用来命名较长的变量名。
- 库例程的名字通常以下划线开头，因此变量不要以下划线开头。
- 严格区分大小写。
- 关键字不能用作变量，关键字中的字符小写。

### 数据类型
#### 基本数据类型
|数据类型|名称|长度|
|-|-|-|
|char|字符型|一个字节|
|int|整型|所用机器中整数的最自然长度|
|float|单精度浮点型|-|
|double|双精度浮点型|-|

#### 类型限定符
short/long 限定整型： short通常为16位，long通常为32位。
signed/unsigned: 限定char类型或任何整型。不带限定符的对象是否带符号取决于具体机器实现。
long double ： 表示高精度的浮点数。浮点型的长度取决于具体的实现。

### 常量
#### define 
定义： #define 常量名 常量值 （宏定义）
常量类型通过后缀可以判断。无符号常量以u/U结尾。

#### 枚举
枚举是一个常量整型值的列表。
定义： enum 枚举名 { 常量名[=值]... }
没有显示指定，第一个值为0，显示指定部分值，按最后一个指定值递增。

#### define VS enum
enum常量值可以自动生成。
调试程序可以以符号形式打印出枚举变量的值。

### 声明
所有变量必须先声明后使用。
初始化表达式 变量名的后面紧跟一个等号以及一个表达式。
默认情况下，外部变量与静态变量将被初始化为0。未经显示初始化的自动变量的值为未定义值。

限定符
const 指定变量的值不能被修改。数组中所有元素的值都不能被修改。

### 运算符
- 算术  + - * / %
- 关系  > >= < <=
- 相等性  == !=
- 逻辑  && || （短路功能） ！
- 自增/自减  ++ --
- 按位  & | ! ^ << >> ~ （只能作用与整型）（算术移位/逻辑移位）
- 赋值  =
- 三元  ?:

优先级
![upload successful](/images/pasted-7.png)

### 类型转换
算术类型转换 运算时两个操作数类型不同，进行运算钱把“较低”的类型提升为“较高”的类型。（float不会自动转换为double）
赋值类型转换 超出的高位部分将被丢弃。
强制类型转换 显示类型转换 （类型名）表达式

char类型是较小的整型，因此在算术表达式中可以自由使用char类型的变量。

### 表达式
用运算符将运算对象连接起来的式子。

## 控制流
语句： 表达式后加上一个分号（；）。分号是语句结束符。
程序块： 复合语句，把一组声明和语句用一对花括号（{}）括在一起。

- if-else 用于条件判定。
- else-if 用于多路判定。
- switch 多路判定语句，使用常量表达式。
- while 循环体执行前对终止条件进行测试。
- for 循环体执行前对终止条件进行测试；包含continue时可以和while转换。（包含简单的初始化和变量递增时更合适）
- do-while 循环体执行后对终止条件进行测试，循环体被至少执行一次。
- break 从switch中跳出，或在for、while、do-while最内层跳出。
- continue 使for、while、do-while开始下一次的循环。
- goto 跳到标号处执行。适合深度嵌套的处理过程。尽可能少的使用。

## 函数
```
返回值类型 函数名(参数声明表) {
    声明和语句
}
```
- 如果函数定义中省略了返回值类型，则默认为int类型。
- 声明函数参数类型及返回值类型。 返回值类型 函数名（参数类型）;。
- 没有声明过的函数会被隐式声明，返回值被假定为int类型，但并不对其参数进行假设。
- 函数不能嵌套定义。
- 没有参数使用void进行声明。
- 支持变长参数 ... 。


- 自动变量 局部作用域变量。控制流进入变量作用域是系统自动为其分配存储空间，并在离开作用域时释放空间的一类变量。
- 外部变量 在函数外定义的全局变量。作用域：变量的定义处开始，到本程序文件的结尾。
- 内部变量 局部变量，指在一个函数内部或复合语句内部定义的变量。

### extern
只声明外部变量，不能初始化。
声明后可在外部变量定义前使用该变量。或由其它源文件做定义。

### 头文件
包含函数声明和宏定义，被多个源文件中引用共享。
使用预处理指定 #include 引用。

### static
- 静态变量 声明对象的作用域限定于被编译源文件的剩余部分。
- 静态函数 除了函数声明所在的文件外，其它文件都无法访问。
- 局部静态变量 一直占据存储空间。

### 寄存器变量
变量使用频率较高，将变量放在机器的寄存器上，使得程序更小，执行速度更快。但编译器可以忽略此选项。
register 声明只适用于自动变量以及函数的形式参数。

### 预处理器
预处理器是编译过程中单独执行的第一个步骤。
- 文件包含 处理 #include 指令。
- 宏替换  替换 #define 变量。
- 条件包含  预处理执行的过程中进行计算。

## 指针、数组
指针： 一种保存变量地址的变量。
间接引用运算符： *。
取址运算符： &。
void指针表示 无类型指针，没有特定的类型，因此可以指向任何类型的数据。参数声明表示可以是任意类型的指针。

### 指针与函数
C中以传值的方式将参数值传递给被调用函数，被调用函数不能直接修改主调函数中变量的值。
指针参数使得被调用函数能够访问和修改主调函数中对象的值。
指针参数： 类型 *参数名， 。
返回指针： 类型 *函数名(...) {...} 。

### 指针与数组
数组： 存储在相邻内存区域中的对象组成的集合。
数组定义： 类型 变量[长度]; 。
指针加1： 指向指针所指对象的下一个对象。
通过数组和下标实现的表达式可等价的通过指针和偏移量实现。
当把数组作为参数传递给函数时，实际传递的是该数组第一个元素的地址，即一个存储地址值的变量，即指针。所以函数定义中，形参 char c[] 和 char *c 是等价的。
也可以将子数组的起始位置的指针传给函数，即将数组的一部分传递给了函数。

### 指针运算
相同类型的指针之间的赋值运算。
指针同整数之间的加法和减法运算。
指向相同数组中元素的两个指针间的减法或比较运算。
将指针赋值为0或指针与0之间的比较运算。

### 指针数组
存储指针的数组。指向指针的指针。
定义: 类型 *变量名[长度] 。
初始化： 字面量初始化。

### 复杂声明
指针的指针 ： 类型 **参数名
数组的指针 ： 类型 (*参数名)[长度]
指针数组 ： 类型 \*参数名[长度]
函数返回指针 : 类型 \*函数名(...)
函数指针 ： 类型 (\*函数名)(参数...)
？？？ ： 类型 (\*(\*函数名())[])()
？？？ ： 类型 (\*(\*函数名[长度])())[长度]

## 结构
结构是一个或多个变量的集合。将一组相关的变量看作一个单元而不是各自读离的实体，因此有助于组织复杂的数据。
```
struct [结构标记] {
    类型 结构成员;
    ...
}
```
结构成员、结构标记和普通变量可以采用相同名字而不会冲突。
声明： struct {...} x, y, z; 与基本类型变量声明一致。
初始化： 定义时初始化， 赋值初始化（结构名.成员）。
结构可以嵌套。

- 结构与函数
- 结构数组
- 结构指针
- 类型定义  typedef， 用来建立新的数据类型名。
- 联合  可以保存不同类型和长度的对象的变量。
