title: 访问权限控制
description: 访问权限控制
categories: 
  - Java
  - 编程思想
author: Jade
date: 2021-12-04 18:00:00
---

重构即重写代码，以使得它更可读、更易理解，并因此而更具有可维护性。
面向对象中需要考虑的一个基本问题：如何把变动的事物与保持不变的事物区分开来。
Java提供了访问权限修饰词，以供类库开发人员向客户端程序员指明哪些式可用的，哪些式不可用的。
访问权限控制的等级，从最大权限到最小权限依次为：public、protected、包访问权限、private。
Java中用关键字package将构建捆绑到一个内聚的类库单元中。而访问权限修饰词会因类是存在于一个相同的包，还是存在于一个单独的包而受到影响。

## 6.1 包：库单元
包内包含有一组类，它们在单一的名字空间之下被组织在了一起。
import关键字是程序变得简单。不使用import得用类全名来指定。
没有指定package，则在未命名包/默认包中。
每个编译单元都只能有一个public类，该类的名称必须与文件名称相同（包括大小写，不包括后缀名）。其它额外的类在包之外无法看到，因为它们主要用来为主public类提供支持。

当编译.java文件时，文件中的每个类都会有一个输出文件。因此，在编译少量.java文件之后，会得到大量的.class文件。
Java可运行程序是一组可以打包并压缩为一个Java文档文件（JAR，Java Archive）的.class文件。Java解释器负责这些文件的查找、装载和解释。
类库实际上是一组类文件，如果希望这些构件从属于同一个群组，就可以使用关键字package。如果使用package语句，它必须是文件中除注释以外的第一句程序代码。
package和import关键字是将单一的全局名字空间分隔开，使得不会出现名称冲突问题。

一个包从未真正将被打包的东西包装成单一的文件，并且要给包可以由许多.class文件构成。 -- 操作系统层次化文件结构、jar工具？。
将所有的文件收入子目录还可以解决另外两个问题：怎样创建独一无二的名称以及怎样查找有可能隐藏于目录结构中某处的类。
package的第一部分是类的创建者的反顺序的域名，第二部分是把package分解为机器上的一个目录。
Java解释器运行过程：找出CLASSPATH（包含一个或多个目录，及JAR文件路径），从根目录开始，解释器获取包的名称并将每个句点替换成反斜杠，产生一个路径名称，查找相关的.class文件。

Java没有C的条件编译功能，该功能绝大多数情况下是用来解决跨平台的问题的，对Java而言没有必要。

务必记住，无论合适创建包，都已经在给定包的名称的时候隐含地指定了目录结构。这个包必须位于其名称所指定的目录之中，而该目录必须是在以CLASSPATH开始的目录中可以查询到的。

## 6.2 Java访问权限修饰词
访问修饰词public、protected、private置于类中每个成员（域、方法）的定义之前。每个访问权限修饰词仅控制它所修饰的特定定义的访问权。
如果不提供任何访问权限修饰词，则意味着它是“包访问权限”。

默认访问权限没有任何关键字，通常指包访问权限。意味着当前的包中的其他所有类对那个成员都有访问权限，但对于这个包之外的所有类，这个成员却是private。
一个编译单元只能隶属于一个包，所以经由包访问权限，处于一个编译单元中的所有类彼此之间都是自动可访问的。
包访问权限为把类群聚在一个包中的做法提供了意义和理由。

关键字public意味着之后紧跟着的成员声明自己对每个人都是可用的，尤其是使用类库的客户程序员更是如此。
Java将没有设定任何包名称的文件自动看作是隶属于该目录的默认包之中。 
    // TODO -- 与设定了包名称的？？？

private除了包含该成员的类之外，其他任何类都无法访问这个成员。

protected处理的是继承的概念。
protected也提供了包访问权限。

## 6.3 接口和实现
访问权限的控制常被称为是具体实现的隐藏。把数据和方法包装进类中，以及具体实现的隐藏，常共同被称作封装。其结果是一个同时带有特征和行为的数据类型。
访问权限控制将权限的边界划在了数据类型的内部。1. 要设定客户端程序员可以使用和不可以使用的界限；2. 将接口和具体实现进行分离。
javadoc所提供的注释文档功能降低了程序代码的可读性对客户端程序员的重要性。

## 6.4 类的访问权限
访问权限修饰词也可以用于确定库中的哪些类对于该库的使用者是可用的。
每个编译单元都只能包含有一个public类，且public类的名称必须完全与含有该编译单元的文件名相匹配，包括大小写。
编译单元可以不带public类。在这种情况下，可以随意对文件命名，该类只可以用于该包之中。
类不可以是private的，也不可以是protected的。
如果不希望其他任何人对该类拥有访问权限，可以把所有的构造器都指定为private。 -- static例外。
单例模式。

## 理解
可以不使用操作系统的层次化文件结构，而直接使用package来指定，但这样会存在冲突。
package是java建立的用于解决命名冲突的。而这在实际开发中确实很有用，省去了很多麻烦。
访问权限控制虽然只有几个关键字，但要用好却不是一件简单的事。
