title: 枚举类型
description: 枚举类型
categories: 
  - Java
  - 编程思想
author: Jade
date: 2021-12-27 19:00:00
---

{% markmap %}

## 19.0 序
- 关键字enum可以将一组具名的值的有限集合创建为一种新的类型，而这些具名的值可以作为常规的程序组件使用。

## 19.1 基本enum特性
- values方法返回enum实例的数组，而且该数组中的元素严格保持其在enum中声明时的顺序。
- 创建enum时，编译器会生成一个相关的类，这个类继承自java.lang.Enum。
- ordinal返回一个int值，是每个enum实例在声明时的次序，从0开始。
- 编译器自动提供equals和hashCode方法。
- Enum类实现了Comparable接口，所以具有compareTo方法。
- Enum类实现了Serializable接口。

## 19.2 向enum中添加新方法
- 除了不能继承自一个enum之外，可以将enum看作一个常规的类。

## 19.3 switch语句中的enum
- 在switch中使用enum，是enum提供的一项非常便利的功能。
- 枚举实例天生就具备整数值的次序，并且可以通过ordinal方法取得其次序。

## 19.4 values的神秘之处
- Enum类并没有values方法。
- values是由编译器添加的static方法。还添加了valueOf方法。
- 可以通过Class对象获取所有enum实例。getEnumConstants。

## 19.5 实现，而非继承
- enum继承自Enum列，不能再继承其他类。可以同时实现一个或多个接口。

## 19.6 随机选取
- 虽然Enum只是一个相当短小的类，但是它能消除很多重复的代码。

## 19.7 实用接口组织枚举
- 在一个接口的内部，创建实现该接口的枚举，以此将元素进行分组，可以达到将枚举元素分类组织的目的。
- 对于enum而言，实现接口是使其子类化的唯一办法。
- 当需要与一大堆类型打交道时，接口就不如enum好用了。 -- 枚举的枚举。
- 一种更简洁的管理枚举的办法：将一个enum嵌套在另一个enum内。

## 19.8 使用EnumSet替代标志
- Java SE5引入EnumSet，为了通过enum创建一种替代品，以替代传统的基于int的位标志。
- EnumSet的优点是，在说明一个二进制位是否存在时，具有更好的表达能力，并且无需担心性能。
- EnumSet中的元素必须来自一个enum。
- EnumSet的基础时long，一个long值有64位，而一个enum实例只需一位bit表示其是否存在。

## 19.9 使用EnumMap
- EnumMap是一种特殊的Map，它要求其中的键必须来自一个enum。
- EnumMap内部可由数组实现。
- 命令模式。首先需要一个只有单一方法的接口，然后从该接口实现具有各自不同的行为的多个子类。
- 与EnumSet一样，enum实例定义时的次序决定了其在EnumMap中的顺序。
- EnumMap允许改变值对象。

## 19.10 常量相关的方法
- Java的enum允许为enum实例编写方法，从而为每个enum实例赋予各自不同的行为。
- 常量相关的方法。
- 表驱动的代码。
- 每个enum元素都是一个其类型的static final实例。
- 由于它们时static实例，无法访问外部类的非static元素或方法，所以对于内部的enum的实例而言，其行为与一般的内部类并不相同。

- 通过常量相关的方法，可以很容易实现一个简单的责任链。
- 枚举类型非常适合用来创建状态机。

## 19.11 多路分发
- Java只支持单路分发。
- 如果要执行的操作包含了不止一个类型未知的对象时，那么Java的动态绑定机制只能处理其中一个的类型。
- 所以必须自己来判定其他的类型，从而实现自己的动态绑定。
- 要利用多路分发，必须为每一个类型提供一个实际的方法调用。

- 使用enum分发。一种方式是使用构造器来初始化每个enum实例，并以一组结果作为参数。形成类似查询表的结构。
- 使用常量相关的方法。将enum用在switch语句中。
- 使用EnumMap分发。使用EnumMap能够实现两路分发。
- 使用二维数组。进一步简化实现两路分发的解决方案。

## 19.12 总结
- 可以将enum与Java语言其他功能结合使用，例如多态、泛型和反射。

{% endmarkmap %}