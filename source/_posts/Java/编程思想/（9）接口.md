title: 接口
description: 接口
categories: 
  - Java
  - 编程思想
author: Jade
date: 2021-12-12 21:00:00
---

{% markmap %}

## 9.0 序
- 接口和内部类提供了一种将接口与实现分离的更加结构化的概念。
- 这种机制在编程语言中并不通用。在Java中存在语言关键字提供了直接支持。

## 9.1 抽象类和抽象方法
- 创建抽象类是希望通过这个通用接口操纵一系列类。
- 相较于没有抽象类的情况，抽象类可以在编译器捕获问题。
- 包含抽象方法的类叫做抽象类。如果一个类包含一个或多个抽象方法，该类必须被限定为抽象的。
- 抽象类是不完整的，为抽象类创建对象是不安全的。
- 没有任何抽象方法的抽象类。 -- 阻止产生这个类的任何对象。
- 抽象类和抽象方法可以使类的抽象性明确起来。是很有用的重构工具。
- 用abstract关键字来限定抽象类和抽象方法。

## 9.2 接口
- interface关键字使抽象的概念更向前迈进了一步。
- interface关键字产生一个完全抽象的类，没有提供任何具体实现。
- 接口被用来建立类与类之间的协议。
- interface允许通过创建一个能够被向上转型为多种基类的类型，来实现某种类似多重继承的特性。
- 接口可以包含域，隐式声明为 static final。
- 接口中的方法隐式声明为 public。实现一个接口时，实现的方法必须被定义为是public的。（Java编译器不允许继承过程中访问权限被降低。） 包访问权限的public意义？？？

## 9.3 完全解耦
- 能够根据所传递的参数对象的不同而具有不同行为的方法，被称为策略模式。
- 复用不在同一继承结构中的某个类。1. 遵循接口编写实现类。2. 适配器。
- 将接口从具体实现中解耦使得接口可以应用于多种不同的具体实现，因此代码更具可复用性。

## 9.4 Java中的多重继承
- 接口没有具体实现，也就是说，没有任何与接口相关的存储。因此，无法阻止与接口的组合。
- 在C++中，组合多个类的接口的行为被称为多重继承（C++对接口只有间接的支持）。在Java中可以执行相同的行为，但是只有一个类可以有具体实现。
- 从一个非接口的类继承，只能从一个类去继承，其它的基元素必须是接口。
- 可以继承任意多个接口，并可以向上转型为每个接口，因为每一个接口都是一个独立类型。
- 使用接口的原因：1. 为了能够向上转型为多个基类型； 2. 防止创建该类的对象。

## 9.5 通过继承来扩展接口
- 通过继承，可以在接口中添加新的方法声明，还可以在新街口中组合接口。这两种情况都可以获得新的接口。
- 在打算组合的不同接口中使用相同的方法名通常会造成代码可读性的混乱。应尽量避免这种情况。

## 9.6 适配接口
- 允许同一个接口具有不同的具体实现。
- interface提供伪多重继承机制。适配器。
- 让方法接受接口类型，是一种让任何类都可以对该方法进行适配的方式。

## 9.7 接口中的域
- 接口中的域自动是 public static final，所以接口成为了一种很便捷的创建常量组的工具。在Java SE5 之前，产生与enum具有相同效果的类型的唯一途径。
- Java中表示具有常量初始值的static final时，使用大写字母的风格（下划线分隔多个单词）。
- 接口中定义的域不能是“空final”，但可以是被非常量表达式初始化。在类第一次被加载时初始化。值被存储在该接口的静态存储区域内。

## 9.8 嵌套接口
- 接口可以嵌套在类或其它接口中。嵌套接口可以被实现为private。
- 实现了一个private接口的内部类，同样可以被实现为public类，但是只能被其自身所使用。
- 实现一个private接口只是一种方式，强制该接口中的方法定义不要添加任何类型信息（不允许向上转型）。
- 返回对private接口的引用的public方法，只有以各种方式可用，就是将返回值交给有权使用它的对象。
- 嵌套在另一个接口中的接口自动就是public的，而不能声明为private的。
- 当实现某个接口时，并不需要实现嵌套在其内部的任何接口。
- private接口不能在定义它的类之外被实现。

## 9.9 接口与工厂
- 生成遵循某个接口的对象的典型方式就是工厂方法设计模式。
- 更加优雅的工厂实现方式： 匿名内部类。

## 9.10 总结
- 对于创建类，几乎在任何时刻，都可以替代为创建一个接口和一个工厂。
- 任何抽象性都应该是应真正的需求而产生的。

{% endmarkmap %}

## 理解
- 接口和抽象类在某些方面确实做得很好。但是，添加了新的类型，意味着需要了解更多，才能更好的掌握它。如接口中域被非常量表达式初始化，需要了解类加载过程；接口中嵌套的修饰，需要了解其意义所在。